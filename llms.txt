# daedalus: Model health, social, and economic costs of a pandemic

*daedalus* implements an integrated epidemiological and economic model
based on Haw et al. ([2022](#ref-haw2022)), to help project the health
and economic outcomes of directly transmitted respiratory epidemics and
the measures taken to mitigate them, including restrictions on economic
activity, vaccination campaigns, and changes in public behaviour.

![Compartmental flows diagram of the epidemic model implemented in
daedalus.](articles/figures/daedalus.png)

Compartmental flows diagram of the epidemic model implemented in
*daedalus*.

## Installation

You can install the development version of daedalus from the [Jameel
Institute R-universe](https://jameel-institute.r-universe.dev/builds),
or from this repository using the *pak* package.

``` r
if(!require("pak")) install.packages("pak")
pak::pak("jameel-institute/daedalus", upgrade = FALSE)

# installation from R-universe
install.packages(
  "daedalus", 
  repos = c(
    "https://jameel-institute.r-universe.dev", "https://cloud.r-project.org"
  )
)
```

### Installation notes

*daedalus* is under active development. To use a version of *daedalus*
associated with major milestones, install a specific version from the
list below.

- IDM Thailand 2024 (R-only version):
  `pak::pak("jameel-institute/daedalus@v0.1.0")`

- IfG workshop 2025 (with real time modelling):
  `pak::pak("jameel-institute/daedalus@v0.2.0")`

### Known issues

We have found the following issues with released versions:

1.  `v0.1.0`: Consumer-worker contacts are not correctly handled,
    leading to higher and faster epidemic peaks.

2.  `v0.2.0`: Consumer-worker contacts are not included in the model,
    leading to lower and later epidemic peaks. The ‘recovered’
    compartment does not include recoveries from hospitalisation. Please
    use the helper function
    [`get_epidemic_summary()`](https://jameel-institute.github.io/daedalus/reference/epi_output_helpers.md)
    to get epidemic sizes.

## Graphical dashboard

*daedalus* powers the graphical pandemic projections dashboard,
[Daedalus Explore](https://daedalus.jameel-institute.org/), which allows
users to try out the Daedalus model without having to write any code.

## Quick start

The model can be run for any country or territory in the `country_names`
list by passing the country name to the function. This automatically
pulls country-specific demographic and economic data, which is included
in the package, into the model (see the [‘Get started’
vignette](https://jameel-institute.github.io/daedalus/articles/daedalus.html)
for more details).

``` r
library(daedalus)

# run model for Canada
output <- daedalus("Canada", "influenza_1918")

# view the output
output
#> <daedalus_output>
#> • Country: Canada
#> • Epidemic: influenza_1918
#> • NPI response: none
#> • Vaccination: no vaccination
#> • Behaviour: no behaviour

# get pandemic costs as a total in million dollars
get_costs(output, "total")
#> [1] 1469908

# disaggregate total for economic, education, and health costs
get_costs(output, "domain")
#>     economic    education   life_value   life_years 
#>    29756.419     1897.382  1438253.766 31232437.916
```

## Customising model parameters

- **Selecting historical epidemic parameters**: Users can select
  infection parameters from among seven epidemics caused by
  directly-transmitted viral respiratory pathogens, which are stored in
  the stand-alone helper package
  [*daedalus.data*](https://jameel-institute.github.io/daedalus.data/).
  These can be called as
  [`daedalus.data::infection_data`](https://jameel-institute.github.io/daedalus.data/reference/epidemic_data.html),
  while epidemic identifiers are stored as
  [`daedalus.data::epidemic_names`](https://jameel-institute.github.io/daedalus.data/reference/epidemic_data.html).

- **Custom country and infection parameters**: Users can override
  default country contact data and epidemic-specific infection arguments
  by passing custom classes to
  [`daedalus()`](https://jameel-institute.github.io/daedalus/reference/daedalus.md);
  see the [package website for more
  details](https://jameel-institute.github.io/daedalus/reference/index.html).

- **Modelling pandemic mitigation measures**: Users can also model the
  implementation of pandemic response measures: for more on this see the
  documentation for the [main model function
  `daedalus()`](https://jameel-institute.github.io/daedalus/reference/daedalus.html),
  and the [vignette on modelling interventions on the package
  website](https://jameel-institute.github.io/daedalus/articles/thresholded_response.html).

- **Modelling parameter uncertainty**: *daedalus* provides the
  [`daedalus_multi_infection()`](https://jameel-institute.github.io/daedalus/reference/daedalus_multi_infection.md)
  function to easily model outcomes for multiple sets of epidemic
  parameters, which can be used to model outcomes under parameter
  uncertainty; see the [vignette on modelling parameter uncertainty for
  more](https://jameel-institute.github.io/daedalus/articles/infection_parameter_uncertainty.html).

## Related projects

*daedalus* is an R implementation of an epidemic projections model based
on Haw et al. ([2022](#ref-haw2022)) and on a [project on the economics
of pandemic preparedness](https://github.com/robj411/p2_drivers).

- [*daedalus.data*](https://github.com/jameel-institute/daedalus.data)
  is a stand-alone helper R package to handle input data for the
  *daedalus* model. Its purpose is to allow users to flexibly manipulate
  or change epidemiological and economic data, without needing to modify
  the model itself.

- [*daedalus.compare*](https://github.com/jameel-institute/daedalus.compare)
  is an R package that sits both downstream of *daedalus* and also wraps
  some *daedalus* functions to help users conveniently run multiple
  epidemic scenarios.

- [*daedalus.api*](https://github.com/jameel-institute/daedalus.data) is
  an R package that connects *daedalus* with the [DAEDALUS
  Explore](https://daedalus.jameel-institute.org/) dashboard.

## Help

To report a bug, request a feature, or just start a discussion, [please
open an issue](https://github.com/jameel-institute/daedalus/issues/new).

## References

Haw, David J., Giovanni Forchini, Patrick Doohan, Paula Christen, Matteo
Pianella, Robert Johnson, Sumali Bajaj, et al. 2022. “Optimizing Social
and Economic Activity While Containing SARS-CoV-2 Transmission Using
DAEDALUS.” *Nature Computational Science* 2 (4): 223–33.
<https://doi.org/10.1038/s43588-022-00233-0>.

# Package index

## Model functions

Run the DAEDALUS integrated economic-epidemiological model.

- [`daedalus()`](https://jameel-institute.github.io/daedalus/reference/daedalus.md)
  : DAEDALUS model for health, social and economic costs of a pandemic
- [`daedalus_multi_infection()`](https://jameel-institute.github.io/daedalus/reference/daedalus_multi_infection.md)
  : Run daedalus for multiple infection parameter sets

## Class `<daedalus_country>`

Represent and access country or territory characteristics.

- [`daedalus_country()`](https://jameel-institute.github.io/daedalus/reference/class_country.md)
  [`is_daedalus_country()`](https://jameel-institute.github.io/daedalus/reference/class_country.md)
  [`print(`*`<daedalus_country>`*`)`](https://jameel-institute.github.io/daedalus/reference/class_country.md)
  : Represent countries and territories for DAEDALUS

## Class `<daedalus_infection>`

Represent and access infection characteristics.

- [`daedalus_infection()`](https://jameel-institute.github.io/daedalus/reference/class_infection.md)
  [`is_daedalus_infection()`](https://jameel-institute.github.io/daedalus/reference/class_infection.md)
  [`print(`*`<daedalus_infection>`*`)`](https://jameel-institute.github.io/daedalus/reference/class_infection.md)
  : Represent infection parameters for DAEDALUS

## Class `<daedalus_vaccination>`

Represent and access vaccine investment scenarios.

- [`daedalus_vaccination()`](https://jameel-institute.github.io/daedalus/reference/class_vaccination.md)
  [`is_daedalus_vaccination()`](https://jameel-institute.github.io/daedalus/reference/class_vaccination.md)
  [`print(`*`<daedalus_vaccination>`*`)`](https://jameel-institute.github.io/daedalus/reference/class_vaccination.md)
  : Represent vaccine investment scenarios for DAEDALUS

## Class `<daedalus_npi>`

Represent and access non-pharmaceutical intervention scenarios.

- [`daedalus_npi()`](https://jameel-institute.github.io/daedalus/reference/class_npi.md)
  [`is_daedalus_npi()`](https://jameel-institute.github.io/daedalus/reference/class_npi.md)
  [`print(`*`<daedalus_npi>`*`)`](https://jameel-institute.github.io/daedalus/reference/class_npi.md)
  [`daedalus_timed_npi()`](https://jameel-institute.github.io/daedalus/reference/class_npi.md)
  : Represent non-pharmaceutical intervention strategies for DAEDALUS

## Class `<daedalus_behaviour>`

Represent and access parameters for behavioural models.

- [`daedalus_old_behaviour()`](https://jameel-institute.github.io/daedalus/reference/class_behaviour.md)
  [`daedalus_new_behaviour()`](https://jameel-institute.github.io/daedalus/reference/class_behaviour.md)
  [`is_daedalus_behaviour()`](https://jameel-institute.github.io/daedalus/reference/class_behaviour.md)
  [`print(`*`<daedalus_behaviour>`*`)`](https://jameel-institute.github.io/daedalus/reference/class_behaviour.md)
  : Represent behaviour-change mechanisms in DAEDALUS

## Class `<daedalus_output>`

Represent and store model output for further processing.

- [`as_daedalus_output()`](https://jameel-institute.github.io/daedalus/reference/class_daedalus_output.md)
  [`validate_daedalus_output()`](https://jameel-institute.github.io/daedalus/reference/class_daedalus_output.md)
  [`is_daedalus_output()`](https://jameel-institute.github.io/daedalus/reference/class_daedalus_output.md)
  [`print(`*`<daedalus_output>`*`)`](https://jameel-institute.github.io/daedalus/reference/class_daedalus_output.md)
  :

  Create and work with `<daedalus_output>` objects

## Model output post-processing

Functions to process model output to calculate pandemic costs and other
outcomes.

- [`get_costs()`](https://jameel-institute.github.io/daedalus/reference/get_costs.md)
  : Get epidemic costs from a DAEDALUS model run
- [`get_fiscal_costs()`](https://jameel-institute.github.io/daedalus/reference/get_fiscal_costs.md)
  : Get pandemic fiscal costs from a model run
- [`get_incidence()`](https://jameel-institute.github.io/daedalus/reference/epi_output_helpers.md)
  [`get_epidemic_summary()`](https://jameel-institute.github.io/daedalus/reference/epi_output_helpers.md)
  [`get_new_vaccinations()`](https://jameel-institute.github.io/daedalus/reference/epi_output_helpers.md)
  : Calculate daily incidences and summarise epidemic measures
- [`get_life_years_lost()`](https://jameel-institute.github.io/daedalus/reference/get_life_years_lost.md)
  : Get life-years lost by demographic group.

## Package generics

Generics with methods for package S3 classes.

- [`get_data()`](https://jameel-institute.github.io/daedalus/reference/get_data.md)
  : Get parameters from DAEDALUS classes
- [`set_data()`](https://jameel-institute.github.io/daedalus/reference/set_data.md)
  : Set parameters in DAEDALUS classes

## Model constants

Useful constants used internally.

- [`N_AGE_GROUPS`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`i_AGE_GROUPS`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`N_VACCINE_STRATA`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`N_VACCINE_DATA_GROUPS`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`AGE_GROUPS`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`i_WORKING_AGE`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`i_SCHOOL_AGE`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`N_ECON_SECTORS`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`i_ECON_SECTORS`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`i_EDUCATION_SECTOR`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`N_ECON_STRATA`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`i_NOT_WORKING`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`DIM_AGE_GROUPS`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`DIM_EPI_COMPARTMENTS`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`DIM_ECON_SECTORS`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`DIM_VACCINE_STRATA`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`i_UNVACCINATED_STRATUM`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`i_VACCINATED_STRATUM`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`i_NEW_VAX_STRATUM`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`VACCINE_GROUPS`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`N_OUTPUT_COLS`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`N_FLAGS`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  [`FLAG_NAMES`](https://jameel-institute.github.io/daedalus/reference/model_constants.md)
  : DAEDALUS model constants
- [`COMPARTMENTS`](https://jameel-institute.github.io/daedalus/reference/epi_constants.md)
  [`idx_COMPARTMENTS`](https://jameel-institute.github.io/daedalus/reference/epi_constants.md)
  [`N_EPI_COMPARTMENTS`](https://jameel-institute.github.io/daedalus/reference/epi_constants.md)
  [`i_EPI_COMPARTMENTS`](https://jameel-institute.github.io/daedalus/reference/epi_constants.md)
  [`N_MODEL_COMPARTMENTS`](https://jameel-institute.github.io/daedalus/reference/epi_constants.md)
  [`N_INFECTION_SUBSYSTEM`](https://jameel-institute.github.io/daedalus/reference/epi_constants.md)
  : Epidemiological compartments and indices
- [`SUMMARY_MEASURES`](https://jameel-institute.github.io/daedalus/reference/summary_constants.md)
  [`SUMMARY_GROUPS`](https://jameel-institute.github.io/daedalus/reference/summary_constants.md)
  : Model output measures and groups for summaries and derived
  time-series
- [`edu_effectiveness_remote`](https://jameel-institute.github.io/daedalus/reference/econ_constants.md)
  [`edu_annual_ror`](https://jameel-institute.github.io/daedalus/reference/econ_constants.md)
  [`work_expected_years`](https://jameel-institute.github.io/daedalus/reference/econ_constants.md)
  [`earnings_loss_discount`](https://jameel-institute.github.io/daedalus/reference/econ_constants.md)
  : Economic constants used in DAEDALUS

## Internal functions

Functions used internally.

- [`new_daedalus_response()`](https://jameel-institute.github.io/daedalus/reference/class_response.md)
  [`response_class_names`](https://jameel-institute.github.io/daedalus/reference/class_response.md)
  [`is_daedalus_response()`](https://jameel-institute.github.io/daedalus/reference/class_response.md)
  [`validate_daedalus_response()`](https://jameel-institute.github.io/daedalus/reference/class_response.md)
  : Constructor for the \<daedalus_response\> super-class and
  sub-classes
- [`country_name_from_arg()`](https://jameel-institute.github.io/daedalus/reference/country_name_from_arg.md)
  : Get country name from arg
- [`daedalus-package`](https://jameel-institute.github.io/daedalus/reference/daedalus-package.md)
  : daedalus: Model Health, Social, and Economic Costs of a Pandemic
- [`daedalus_internal()`](https://jameel-institute.github.io/daedalus/reference/daedalus_internal.md)
  : Internal function for daedalus
- [`dummy_npi()`](https://jameel-institute.github.io/daedalus/reference/dummy_npi.md)
  : Dummy NPI
- [`dummy_vaccination()`](https://jameel-institute.github.io/daedalus/reference/dummy_vaccination.md)
  : Dummy vaccination
- [`get_beta()`](https://jameel-institute.github.io/daedalus/reference/get_beta.md)
  : Calculate transmission parameter from infection and contact
  parameters
- [`get_daedalus_multi_response_times()`](https://jameel-institute.github.io/daedalus/reference/get_daedalus_multi_response_times.md)
  : Get response times from a dust2 system with multiple groups
- [`get_daedalus_response_times()`](https://jameel-institute.github.io/daedalus/reference/get_daedalus_response_times.md)
  : Get model response times from dust2 output
- [`get_state_indices()`](https://jameel-institute.github.io/daedalus/reference/get_state_indices.md)
  : Get a vector of state indices
- [`get_value_lost_earnings()`](https://jameel-institute.github.io/daedalus/reference/get_value_lost_earnings.md)
  : Calculate the present value of lost earnings due to educational
  disruption
- [`get_value_school_year()`](https://jameel-institute.github.io/daedalus/reference/get_value_school_year.md)
  : Calculate the value of a school year
- [`initial_flags()`](https://jameel-institute.github.io/daedalus/reference/initial_flags.md)
  : Initial values for model flags
- [`assert_class_fields()`](https://jameel-institute.github.io/daedalus/reference/input_checks.md)
  : Check that a class has expected names
- [`make_initial_state()`](https://jameel-institute.github.io/daedalus/reference/make_initial_state.md)
  : Generate a default initial state for DAEDALUS
- [`make_susc_matrix()`](https://jameel-institute.github.io/daedalus/reference/make_susc_matrix.md)
  : Prepare susceptibility matrix for a vaccine-country pair
- [`new_daedalus_hosp_overflow()`](https://jameel-institute.github.io/daedalus/reference/new_daedalus_hosp_overflow.md)
  : Make a hospital overflow response
- [`out_list_to_df()`](https://jameel-institute.github.io/daedalus/reference/out_list_to_df.md)
  : Reshape output data
- [`make_conmat_large()`](https://jameel-institute.github.io/daedalus/reference/prepare_contacts.md)
  [`make_work_contacts()`](https://jameel-institute.github.io/daedalus/reference/prepare_contacts.md)
  [`make_consumer_contacts()`](https://jameel-institute.github.io/daedalus/reference/prepare_contacts.md)
  [`make_full_contacts()`](https://jameel-institute.github.io/daedalus/reference/prepare_contacts.md)
  : Make large contact matrix for Cpp model.
- [`prepare_output()`](https://jameel-institute.github.io/daedalus/reference/prepare_output.md)
  : Prepare DAEDALUS data
- [`prepare_parameters()`](https://jameel-institute.github.io/daedalus/reference/prepare_parameters.md)
  : Prepare infection parameters for model
- [`process_event_times()`](https://jameel-institute.github.io/daedalus/reference/process_event_times.md)
  : Process event data
- [`get_ngm()`](https://jameel-institute.github.io/daedalus/reference/reff_calculation.md)
  : Calculate the effective R
- [`drop_null()`](https://jameel-institute.github.io/daedalus/reference/tools.md)
  [`first()`](https://jameel-institute.github.io/daedalus/reference/tools.md)
  [`last()`](https://jameel-institute.github.io/daedalus/reference/tools.md)
  [`weighted_rowsums()`](https://jameel-institute.github.io/daedalus/reference/tools.md)
  [`interest_accumulation()`](https://jameel-institute.github.io/daedalus/reference/tools.md)
  [`annual_rate_daily()`](https://jameel-institute.github.io/daedalus/reference/tools.md)
  : Helper functions
- [`uptake_percent_to_number()`](https://jameel-institute.github.io/daedalus/reference/uptake_percent_to_number.md)
  : Convert an uptake limit from a percentage to a number
- [`validate_behaviour_input()`](https://jameel-institute.github.io/daedalus/reference/validate_behaviour_input.md)
  : Internal helper function to prepare parameters
- [`validate_country_input()`](https://jameel-institute.github.io/daedalus/reference/validate_country_input.md)
  : Validate country input
- [`validate_infection_input()`](https://jameel-institute.github.io/daedalus/reference/validate_infection_input.md)
  [`validate_infection_list_input()`](https://jameel-institute.github.io/daedalus/reference/validate_infection_input.md)
  : Validate and return infection input
- [`validate_npi_input()`](https://jameel-institute.github.io/daedalus/reference/validate_npi_input.md)
  : Validate npi inputs
- [`validate_vaccination_input()`](https://jameel-institute.github.io/daedalus/reference/validate_vaccination_input.md)
  : Validate vaccination inputs

# Articles

### Model description and user parameterisation

- [General model
  description](https://jameel-institute.github.io/daedalus/articles/info_model_description.md):

### Package vignettes and user guides

- [Modelling threshold-dependent economic
  closures](https://jameel-institute.github.io/daedalus/articles/thresholded_response.md):
- [Modelling time-limited economic
  closures](https://jameel-institute.github.io/daedalus/articles/timed_response.md):
- [Evaluating the costs of pandemic
  scenarios](https://jameel-institute.github.io/daedalus/articles/pandemic_costs.md):
- [Modelling outcomes under uncertainty in infection
  parameters](https://jameel-institute.github.io/daedalus/articles/infection_parameter_uncertainty.md):

### Model details: Calculating pandemic costs

- [Value of life-years
  lost](https://jameel-institute.github.io/daedalus/articles/info_life_value.md):
- [Value of educational time
  lost](https://jameel-institute.github.io/daedalus/articles/info_edu_value.md):
