<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Comparing response strategies under uncertainty and valuations • daedalus</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Inter-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Comparing response strategies under uncertainty and valuations">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">
    <a href="https://www.imperial.ac.uk/jameel-institute/" class="external-link"><img src="https://raw.githubusercontent.com/jameel-institute/jameelinst.rpkg.theme/refs/heads/main/inst/pkgdown/assets/logo_imperial_jameel.svg" id="logo" alt="Abdul Latif Jameel Institute for Disease and Emergency Analytics"></a>
    <a class="navbar-brand me-2" href="../index.html">daedalus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/daedalus.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Package vignettes and user guides</h6></li>
    <li><a class="dropdown-item" href="../articles/thresholded_response.html">Modelling threshold-dependent economic closures</a></li>
    <li><a class="dropdown-item" href="../articles/pandemic_costs.html">Evaluating the costs of pandemic scenarios</a></li>
    <li><a class="dropdown-item" href="../articles/parameter_uncertainty.html">Exploring uncertainty in pandemic costs due to parameter uncertainty</a></li>
    <li><a class="dropdown-item" href="../articles/strategy_comparison.html">Comparing response strategies under uncertainty and valuations</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Model details: Calculating pandemic costs</h6></li>
    <li><a class="dropdown-item" href="../articles/info_life_value.html">Value of life-years lost</a></li>
    <li><a class="dropdown-item" href="../articles/info_edu_value.html">Value of educational time lost</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jameel-institute/daedalus/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Comparing response strategies under uncertainty and valuations</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jameel-institute/daedalus/blob/main/vignettes/strategy_comparison.Rmd" class="external-link"><code>vignettes/strategy_comparison.Rmd</code></a></small>
      <div class="d-none name"><code>strategy_comparison.Rmd</code></div>
    </div>

    
    
<p>This vignette explores how decision-makers could compare different
pandemic response strategies under parameter uncertainty and differing
life-year valuations, using the <em>daedalus</em> model.</p>
<p>As an example, we focus on the outbreak of a novel Covid-19 like
outbreak in Thailand and we consider the uncertainty in community
contact rates (see also the vignette on disease parameter
uncertainty).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load {daedalus} and helper packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jameel-institute/daedalus" class="external-link">daedalus</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="general-approach">General approach<a class="anchor" aria-label="anchor" href="#general-approach"></a>
</h2>
<p>The general approach is:</p>
<ul>
<li><p>Create multiple <code>&lt;daedalus_country&gt;</code> objects
with distinct values of contact_matrix;</p></li>
<li><p>Run <code><a href="../reference/daedalus.html">daedalus()</a></code> on each distinct
<code>&lt;daedalus_country&gt;</code> object, comparing costs under two
different response strategies;</p></li>
<li><p>Compare the breakdown of costs in terms of life-year, economic
and educational components;</p></li>
<li><p>Analyse how costs changes with different life-year valuations and
their impact on strategy choice.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="introducing-uncertainty-in-contact-rates">Introducing uncertainty in contact rates<a class="anchor" aria-label="anchor" href="#introducing-uncertainty-in-contact-rates"></a>
</h2>
<p>To introduce uncertainty in contact rates, we randomly sample contact
matrices from other countries in the package and store these in country
objects.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># draw 100 random integers between 1 and the number of countries in the package</span></span>
<span><span class="va">rand_ind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">country_names</span><span class="op">)</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a list of the contact matrices associated with these random integers:</span></span>
<span><span class="co"># index 3 of daedalus_country is the contact matrix</span></span>
<span><span class="va">rand_mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">rand_ind</span>, <span class="kw">function</span><span class="op">(</span><span class="va">ind</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">country</span> <span class="op">&lt;-</span> <span class="va">country_names</span><span class="op">[</span><span class="va">ind</span><span class="op">]</span></span>
<span>  <span class="fu"><a href="../reference/class_country.html">daedalus_country</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a list of daedalus_country objects using Thai data and the randomly</span></span>
<span><span class="co"># selected contact matrices</span></span>
<span><span class="va">country_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>  <span class="va">rand_mat</span>,</span>
<span>  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/class_country.html">daedalus_country</a></span><span class="op">(</span><span class="st">"Thailand"</span>, parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>contact_matrix <span class="op">=</span> <span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># view a country object</span></span>
<span><span class="va">country_list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">&lt;daedalus_country&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> Name: <span style="color: #BB0000;">Thailand</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> Demography: 3596052, 12336091, 44823339, and 9044496</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> Community contact matrix:</span></span>
<span><span class="co">#&gt;              0-4       5-19     20-64       65+</span></span>
<span><span class="co">#&gt; 0-4   3.71875000  2.6043561  7.085408 0.3308315</span></span>
<span><span class="co">#&gt; 5-19  0.90524919 13.0380375  6.757191 0.6884541</span></span>
<span><span class="co">#&gt; 20-64 0.58312815  1.5999175 11.224588 1.1912292</span></span>
<span><span class="co">#&gt; 65+   0.08726933  0.4686894  3.442413 2.5454869</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> GNI (PPP $): <span style="color: #0000BB;">17710</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> Hospital capacity: <span style="color: #00BB00;">21987</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="run-daedalus-model-for-each-country-object-under-two-response-strategies">Run DAEDALUS model for each country object under two response
strategies<a class="anchor" aria-label="anchor" href="#run-daedalus-model-for-each-country-object-under-two-response-strategies"></a>
</h2>
<p>As an example, we run the model for no closures and economic closure
response strategies, for a Covid-19 like outbreak assuming no prior
vaccine investment.</p>
<p><strong>Note that</strong> running <code><a href="../reference/daedalus.html">daedalus()</a></code>
iteratively may take some time, as the function checks the inputs and
internally prepares parameters each time, as well as preparing the
output data. Future package versions aim to streamline these steps and
provide a stripped down version of the function optimised for scenario
modelling for parameter fitting or with parameter uncertainty.</p>
<p>Users can run the model iteratively over the country samples in
parallel using frameworks such as <a href="https://cran.r-project.org/package=furrr" class="external-link">the <em>furrr</em>
package</a>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># run daedalus() for no clousure and economic closure strategies</span></span>
<span><span class="va">output_list_none_closure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">country_list</span>, <span class="va">daedalus</span>,</span>
<span>  infection <span class="op">=</span> <span class="st">"sars_cov_2_pre_alpha"</span>,</span>
<span>  response_strategy <span class="op">=</span> <span class="st">"none"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">output_list_econ_closure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">country_list</span>, <span class="va">daedalus</span>,</span>
<span>  infection <span class="op">=</span> <span class="st">"sars_cov_2_pre_alpha"</span>,</span>
<span>  response_strategy <span class="op">=</span> <span class="st">"economic_closures"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>We can then extract and plot the total losses under each
strategy.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># extract the costs under each strategy across all three domains</span></span>
<span><span class="va">costs_none_closure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span></span>
<span>  <span class="va">output_list_none_closure</span>, <span class="va">get_costs</span>, <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>, <span class="st">"domain"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">costs_econ_closure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span></span>
<span>  <span class="va">output_list_econ_closure</span>, <span class="va">get_costs</span>, <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>, <span class="st">"domain"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># store as a dataframe</span></span>
<span><span class="va">costs_none_closure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">costs_none_closure</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span>, response_strategy <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span>
<span><span class="va">costs_econ_closure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">costs_econ_closure</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span>, response_strategy <span class="op">=</span> <span class="st">"economic_closures"</span><span class="op">)</span></span>
<span><span class="va">costs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">costs_none_closure</span>, <span class="va">costs_econ_closure</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make violin plots of the total cost under each strategy</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">costs</span>,</span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="va">response_strategy</span>, y <span class="op">=</span> <span class="va">economic</span> <span class="op">+</span> <span class="va">education</span> <span class="op">+</span> <span class="va">life_years</span>,</span>
<span>    fill <span class="op">=</span> <span class="va">response_strategy</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html" class="external-link">geom_violin</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="strategy_comparison_files/figure-html/extract_plot_cost-1.png" width="768"></p>
</div>
<div class="section level2">
<h2 id="comparing-cost-dimensionsdomains">Comparing cost dimensions/domains<a class="anchor" aria-label="anchor" href="#comparing-cost-dimensionsdomains"></a>
</h2>
<p>Response strategies should not just be compared in terms of total
losses, but also the loss in each dimension (life years, economic losses
and educational losses). There may be a trade-off between e.g. life year
losses and economic losses when comparing two strategies.</p>
<p>Here, we make scatter plots of the life-year losses vs. the economic
and educational losses under each strategy.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># first calculate the mean life-year and mean economic and educational losses</span></span>
<span><span class="co"># for each strategy</span></span>
<span><span class="va">means</span> <span class="op">&lt;-</span> <span class="va">costs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">response_strategy</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>mean_x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">life_years</span><span class="op">)</span>, mean_y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">economic</span> <span class="op">+</span> <span class="va">education</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make a scatter plot of the losses</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">costs</span>,</span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">life_years</span>, y <span class="op">=</span> <span class="va">economic</span> <span class="op">+</span> <span class="va">education</span>, colour <span class="op">=</span> <span class="va">response_strategy</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">means</span>,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mean_x</span>, y <span class="op">=</span> <span class="va">mean_y</span>, fill <span class="op">=</span> <span class="va">response_strategy</span><span class="op">)</span>,</span>
<span>    colour <span class="op">=</span> <span class="st">"black"</span>, shape <span class="op">=</span> <span class="fl">21</span>, size <span class="op">=</span> <span class="fl">4</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="strategy_comparison_files/figure-html/domain_scatter_plots-1.png" width="768"></p>
<p>##Changing life-year valuations</p>
<p>Decision-makers may have different preferences and different
willingness-to-pay to avert the loss of a life-year. Here, we change the
life-year valuations used in the model to see how that affects strategy
choice.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># first we consider a range of multipliers for the value of a life year and we</span></span>
<span><span class="co"># identify the loss-minimising strategy for each</span></span>
<span><span class="va">props</span> <span class="op">&lt;-</span> <span class="va">costs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/expand.html" class="external-link">crossing</a></span><span class="op">(</span>vsl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">200</span>, by <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>life_years <span class="op">=</span> <span class="va">life_years</span> <span class="op">*</span> <span class="va">vsl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">vsl</span>, <span class="va">sample</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    min_strat <span class="op">=</span> <span class="va">response_strategy</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.min.html" class="external-link">which.min</a></span><span class="op">(</span><span class="va">life_years</span> <span class="op">+</span> <span class="va">economic</span> <span class="op">+</span> <span class="va">education</span><span class="op">)</span><span class="op">]</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">vsl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">min_strat</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>proportion <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># then we can make a plot of the probability each strategy is loss-minimising</span></span>
<span><span class="co"># for different valuations</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">props</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">vsl</span>, y <span class="op">=</span> <span class="va">proportion</span>, fill <span class="op">=</span> <span class="va">min_strat</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_area</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="strategy_comparison_files/figure-html/ceac_plot-1.png" width="768"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pratik Gupte, Patrick Doohan, Robert Johnson, Rich FitzJohn, Emma Russell, David Mears, Katharina Hauck, Abdul Latif Jameel Institute for Disease and Emergency Analytics, Imperial College of Science, Technology and Medicine.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
